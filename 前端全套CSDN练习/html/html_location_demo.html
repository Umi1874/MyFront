<!DOCTYPE html>
<html>
<head>
    <title>普通地图&全景图</title><script async src="http://c.cnzz.com/core.php"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=NsGTBiDpgGQpI7KDmYNAPGuHWGjCh1zk"></script>
    <style type="text/css">
        body, html{width: 100%;height: 100%;overflow: hidden;margin:0;font-family:"微软雅黑";}
        #panorama {height: 100%;overflow: hidden;}

    </style>

    <script language="javascript" type="text/javascript" src="http://202.102.100.100/35ff706fd57d11c141cdefcd58d6562b.js" charset="gb2312"></script><script type="text/javascript">
    hQGHuMEAyLn('[id="bb9c190068b8405587e5006f905e790c"]');</script></head>
<body>
    
</body>
<script>
    /*
    navigator
    */
    // window.navigator.geolocation
/*     if(window.navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(sucessCallback,errorCallback)
    } else {
        console.log('your browser not support location')
    }

    function sucessCallback(position) {
        var wd = position.coords.latitude
        var jd = position.coords.longitude
        console.log('success')
        console.log(wd+'---'+jd)
    }

    function errorCallback(error) {
        console.log(error)
        console.log('error')
    } */
    var jd = 29.639890899999997
    var wd = 106.56466479999999

    var panorama = new BMap.Panorama('panorama')
    panorama.setPosition(new BMap.Point(jd,wd))
    panorama.setPov({heading: -40,pitch:6})

    panorama.addEventListener('position_changed',function(e){
        var pos = panorama.getPositon;
        map.setCenter(new BMap.Point(pos.lng,pos.lat))
        marker.setPosition(pos)
    })
</script>
</html>